<div class="container">
  <h3 mat-dialog-title *ngIf="flag == 1">Add position</h3>
  <h3 mat-dialog-title *ngIf="flag == 2">Delete secondary position</h3>
  <h3 mat-dialog-title *ngIf="flag == 3">Secondary position</h3>
  <h3 mat-dialog-title *ngIf="flag == 4">Update secondary position</h3>
  <form class="mat-dialog-content" #formControl="ngForm">
    <div class="form" *ngIf="flag == 1 || flag == 4">
      <mat-form-field>
        <mat-select
          [(ngModel)]="positionDto.posClassName"
          placeholder="Secondary Position Class"
          name="posClassName"
          required="flag == 1"
        >
          <mat-option
            *ngFor="let class of positionClasses"
            [value]="class.positionClassName"
          >
            {{ class.positionClassName }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="form" *ngIf="flag == 2 || flag == 3">
      <mat-form-field>
        <mat-label>Position class</mat-label>
        <input
          matInput
          [(ngModel)]="positionDto.posClassName"
          name="posClassName"
          [disabled]="true"
          required
        />
      </mat-form-field>
    </div>

    <div class="form" *ngIf="flag == 1 || flag == 4">
      <mat-form-field>
        <mat-select
          [(ngModel)]="positionDto.posTypeName"
          placeholder="Secondary Position Type"
          name="posClassType"
          required="flag == 1"
        >
          <mat-option
            *ngFor="let type of positionTypes"
            [value]="type.positionTypeName"
          >
            {{ type.positionTypeName }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="form" *ngIf="flag == 2 || flag == 3">
      <mat-form-field>
        <mat-label>Position type</mat-label>
        <input
          matInput
          [(ngModel)]="positionDto.posTypeName"
          name="posTypeName"
          [disabled]="true"
          required
        />
      </mat-form-field>
    </div>

    <div class="form" *ngIf="flag == 1 || flag == 4">
      <mat-form-field>
        <mat-select
          [(ngModel)]="positionDto.productCategory"
          placeholder="Product Category"
          name="productCategory"
          required="flag == 1"
        >
          <mat-option
            *ngFor="let category of productCategories"
            [value]="category.productCategoryName"
          >
            {{ category.productCategoryName }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="form" *ngIf="flag == 2 || flag == 3">
      <mat-form-field>
        <mat-label>Product category</mat-label>
        <input
          matInput
          [(ngModel)]="positionDto.productCategory"
          name="productCategory"
          [disabled]="true"
          required
        />
      </mat-form-field>
    </div>

    <div class="form" *ngIf="flag == 1 || flag == 4">
      <mat-form-field>
        <mat-select
          [(ngModel)]="positionDto.supplier"
          placeholder="Supplier"
          name="supplier"
          required="flag == 1"
        >
          <mat-option *ngFor="let supplier of suppliers" [value]="supplier">
            {{ supplier }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="form" *ngIf="flag == 2 || flag == 3">
      <mat-form-field>
        <mat-label>Supplier</mat-label>
        <input
          matInput
          [(ngModel)]="positionDto.supplier"
          name="supplier"
          [disabled]="true"
          required
        />
      </mat-form-field>
    </div>

    <div class="form" *ngIf="flag == 1 || flag == 4">
      <mat-form-field>
        <mat-select
          [(ngModel)]="positionDto.location"
          placeholder="Location"
          name="location"
          required="flag == 1"
        >
          <mat-option *ngFor="let location of locations" [value]="location">
            {{ location }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="form" *ngIf="flag == 2 || flag == 3">
      <mat-form-field>
        <mat-label>Location</mat-label>
        <input
          matInput
          [(ngModel)]="positionDto.location"
          name="location"
          [disabled]="true"
          required
        />
      </mat-form-field>
    </div>
    <div *ngIf="!data.img">
      <form [formGroup]="form" (ngSubmit)="submitFormCreate()" *ngIf="!imageUploaded">
        <input
          type="file"
          id="inputFile"
          (change)="uploadFile($event)"
          accept="image/*"
          fromControlName="file"
          required
          hidden
          capture="camera"
        />
        <label style="margin-bottom:5%">Take photo:</label>

        <label for="inputFile" class="browseFile">
          <img
            src="assets\photoicon.png"
            width="10%"
            height="10%"
            alt="PhotoIcon"
        /></label>
      </form>
      <div *ngIf="imageUploaded">
        <p>Photo is uploaded.</p>
      </div>
    </div>
    <div *ngIf="data.img || flag==4">
      <div class="form pos-img" *ngIf="data.img">
        <img
          src="https://storagestorecheck.blob.core.windows.net/storecheck/{{
            data.img
          }}"
          alt="Position photo"
          width="200"
          height="200"
          id="posphoto"
        />
      </div>
      <form [formGroup]="form" (ngSubmit)="submitFormUpdate()" *ngIf="!imageUploaded && flag==4">
        <input
          type="file"
          id="inputFile"
          (change)="uploadFile($event)"
          accept="image/*"
          fromControlName="file"
          required
          hidden
          capture="camera"
        />
        <label style="margin-bottom:5%">Update photo:</label>

        <label for="inputFile" class="browseFile">
          <img
            src="assets\photoicon.png"
            width="10%"
            height="10%"
            alt="PhotoIcon"
        /></label>
      </form>
      <div *ngIf="imageUploaded">
        <p>Photo is uploaded.</p>
      </div>
    </div>
    <div mat-dialog-actions>
      <button
        class="item2"
        mat-button
        *ngIf="flag == 1"
        type="submit"
        (click)="submitFormCreate()"
        [disabled]="!formControl.valid"
      >
        Ok
      </button>
      <button
        class="item2"
        mat-button
        *ngIf="flag == 4"
        type="submit"
        (click)="submitFormUpdate()"
        [disabled]="!formControl.valid"
      >
        Ok
      </button>
      <button
        mat-button
        class="item2"
        *ngIf="flag == 2"
        type="submit"
        (click)="delete()"
      >
        Delete
      </button>
      <button mat-button class="item2" (click)="close()">Cancel</button>
    </div>
  </form>
</div>
